{"ast":null,"code":"import { mapMutations } from 'vuex';\nexport default {\n  components: {\n    GoodsManage: () => import('../components/GoodsManage.vue')\n  },\n  methods: {\n    ...mapMutations(['setgoods']),\n    async handleDelete(index, row) {\n      // 发送post请求\n      const {\n        data\n      } = await this.$http({\n        method: 'post',\n        url: '/delete',\n        headers: {\n          Authorization: localStorage.getItem('token')\n        },\n        data: {\n          id: row.goodsname\n        }\n      });\n      let msg = data.msg;\n      if (data.status === 200) {\n        // 更新成功后，获取最新的商品信息\n        const {\n          data\n        } = await this.$http({\n          method: 'get',\n          headers: {\n            Authorization: localStorage.getItem('token')\n          },\n          url: '/getfullgoods'\n        });\n        if (data.status === 200) {\n          this.setgoods(data.goods);\n          msg = '删除成功';\n        } else msg = '服务器未知错误';\n      }\n      // 展示结果\n      alert(msg);\n    }\n  }\n};","map":{"version":3,"mappings":"AAcA;AACA;EACAA;IACAC;EACA;EACAC;IACA;IACA;MACA;MACA;QAAAC;MAAA;QACAC;QACAC;QACAC;UACAC;QACA;QACAJ;UACAK;QACA;MACA;MACA;MACA;QACA;QACA;UAAAL;QAAA;UACAC;UACAE;YACAC;UACA;UACAF;QACA;QACA;UACA;UACAI;QACA;MACA;MACA;MACAC;IACA;EACA;AACA","names":["components","GoodsManage","methods","data","method","url","headers","Authorization","id","msg","alert"],"sourceRoot":"src/components","sources":["DeleteGoods.vue"],"sourcesContent":["<template>\n  <div class=\"del\">\n    <GoodsManage>\n      <el-table-column label=\"操作\">\n        <template slot-scope=\"scope\">\n          <el-button size=\"mini\" type=\"danger\" @click=\"handleDelete(scope.$index, scope.row)\" style=\"margin-top:10px\">删除\n          </el-button>\n        </template>\n      </el-table-column>\n    </GoodsManage>\n  </div>\n</template>\n\n<script>\nimport { mapMutations } from 'vuex'\nexport default {\n  components: {\n    GoodsManage: () => import('../components/GoodsManage.vue')\n  },\n  methods: {\n    ...mapMutations(['setgoods']),\n    async handleDelete(index, row) {\n      // 发送post请求\n      const { data } = await this.$http({\n        method: 'post',\n        url: '/delete',\n        headers: {\n          Authorization: localStorage.getItem('token')\n        },\n        data: {\n          id: row.goodsname\n        }\n      })\n      let msg = data.msg\n      if (data.status === 200) {\n        // 更新成功后，获取最新的商品信息\n        const { data } = await this.$http({\n          method: 'get',\n          headers: {\n            Authorization: localStorage.getItem('token')\n          },\n          url: '/getfullgoods'\n        })\n        if (data.status === 200) {\n          this.setgoods(data.goods)\n          msg = '删除成功'\n        } else msg = '服务器未知错误'\n      }\n      // 展示结果\n      alert(msg)\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n\n</style>\n"]},"metadata":{},"sourceType":"module"}